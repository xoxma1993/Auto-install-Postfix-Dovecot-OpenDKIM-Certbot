```markdown
# Настройка Почтового Сервера на Linux

Этот руководство описывает процесс настройки почтового сервера на Linux с использованием Postfix (SMTP), Dovecot (IMAP), OpenDKIM (подпись сообщений DKIM) и Certbot (SSL сертификаты от Let's Encrypt).

## Описание Скрипта

Скрипт `setup-mail-server.sh` автоматизирует следующие задачи:

- **Определение переменных и функций**: Установка основных переменных и функции логирования.
- **Запрос пароля**: Ввод пароля для доступа к почтовому ящику.
- **Обновление и установка пакетов**: Установка Postfix, Dovecot, OpenDKIM и Certbot.
- **Конфигурация Postfix**: Настройка основных параметров Postfix.
- **Конфигурация Dovecot**: Указание местоположения почтовых ящиков.
- **Настройка аутентификации Dovecot**: Создание пользователя с паролем.
- **Настройка DKIM**: Генерация и настройка ключей DKIM.
- **Интеграция OpenDKIM с Postfix**: Настройка Postfix для использования OpenDKIM.
- **Получение SSL сертификата от Let's Encrypt**: Создание и применение SSL сертификатов.
- **Настройка SSL для Postfix и Dovecot**: Применение SSL сертификатов к Postfix и Dovecot.
- **Перезапуск служб**: Применение всех изменений путём перезапуска сервисов.
- **Вывод информации для DNS-настройки**: Инструкции по настройке записей DKIM и SPF.
- **Вывод информации о портах**: Информация о портах для подключения.
- **Вывод информации о веб-интерфейсе и учетных данных**: Данные для входа в почтовый ящик.

## Инструкция по Установке

### Шаг 1: Подготовка

Убедитесь, что у вас есть доступ к серверу с правами суперпользователя и зарегистрированное доменное имя, указывающее на IP-адрес сервера.

### Шаг 2: Загрузка Скрипта

Загрузите `setup-mail-server.sh` на сервер через FTP, SCP, или напрямую в текстовый редактор.

### Шаг 3: Выставление Прав

```bash
chmod +x setup-mail-server.sh
```

### Шаг 4: Запуск Скрипта

```bash
./setup-mail-server.sh
```

### Шаг 5: Проверка и Настройка

- Проверьте логи на предмет ошибок.
- Настройте DNS согласно инструкциям скрипта.

### Шаг 6: Тестирование и Мониторинг

- Проверьте отправку и получение писем.
- Настройте брандмауэр и системы обнаружения вторжений.

### Шаг 7: Обновления и Бэкапы

Регулярно обновляйте сервер и создавайте бэкапы данных.
